"use strict";

var helpers = require("../../node_modules/@parcel/transformer-react-refresh-wrap/lib/helpers/helpers.js");

var prevRefreshReg = window.$RefreshReg$;
var prevRefreshSig = window.$RefreshSig$;
helpers.prelude(module);

try {
  Object.defineProperty(exports, "__esModule", {
    value: true
  });
  exports.default = void 0;

  var _react = _interopRequireDefault(require("react"));

  var _reactRedux = require("react-redux");

  var _users = require("../api/users");

  var _variables = require("../utils/variables");

  var _jsxFileName = "/home/manu/Documents/coderafiki/study-tool/src/components/login.tsx",
      _s = $RefreshSig$();

  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

  function Login({
    dispatch,
    state
  }) {
    _s();

    const [user, setUser] = _react.default.useState({
      login: '',
      password: ''
    });

    const signup = () => {
      dispatch({
        type: 'SET_COMPONENT',
        state: {
          component: 'signup'
        }
      });
    };

    const change = event => {
      event.preventDefault();
      const name = event.target.name;
      const userr = user;
      userr[name] = event.target.value;
      setUser(userr);
    };

    const login = async () => {
      const response = await _users.api.login(user.login, user.password);
      console.log(response.status);

      if (response.status === 200) {
        localStorage.setItem(_variables.ptfs0u, response.data.token);
      }
    };

    return /*#__PURE__*/_react.default.createElement("div", {
      id: "login",
      style: {
        width: "30vw"
      },
      className: "container is-flex is-flex-direction-column is-justify-content-center is-align-content-center",
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 35,
        columnNumber: 9
      }
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "p-4",
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 36,
        columnNumber: 13
      }
    }, "Login"), /*#__PURE__*/_react.default.createElement("div", {
      className: "field",
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 37,
        columnNumber: 13
      }
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "control m-2",
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 38,
        columnNumber: 17
      }
    }, /*#__PURE__*/_react.default.createElement("input", {
      onChange: change,
      className: "input is-primary",
      type: "email",
      placeholder: "email",
      name: "login",
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 39,
        columnNumber: 21
      }
    }))), /*#__PURE__*/_react.default.createElement("div", {
      className: "field",
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 42,
        columnNumber: 13
      }
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "control m-2",
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 43,
        columnNumber: 17
      }
    }, /*#__PURE__*/_react.default.createElement("input", {
      onChange: change,
      className: "input is-primary",
      type: "password",
      placeholder: "password",
      name: "password",
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 44,
        columnNumber: 21
      }
    }))), /*#__PURE__*/_react.default.createElement("div", {
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 47,
        columnNumber: 13
      }
    }, /*#__PURE__*/_react.default.createElement("div", {
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 48,
        columnNumber: 17
      }
    }, /*#__PURE__*/_react.default.createElement("a", {
      type: "button",
      className: "button m-4 is-rounded",
      onClick: login,
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 48,
        columnNumber: 22
      }
    }, "login")), /*#__PURE__*/_react.default.createElement("div", {
      className: "m-4",
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 49,
        columnNumber: 17
      }
    }, /*#__PURE__*/_react.default.createElement("a", {
      onClick: signup,
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 49,
        columnNumber: 39
      }
    }, "register"))));
  }

  _s(Login, "4l9Hlp4nsJDUoRPlUN+GCN94w5k=");

  _c = Login;

  var _default = (0, _reactRedux.connect)((state, dispatch) => ({
    state,
    dispatch
  }))(Login);

  exports.default = _default;

  var _c;

  $RefreshReg$(_c, "Login");
  helpers.postlude(module);
} finally {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}