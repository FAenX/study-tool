"use strict";

var helpers = require("../../node_modules/@parcel/transformer-react-refresh-wrap/lib/helpers/helpers.js");

var prevRefreshReg = window.$RefreshReg$;
var prevRefreshSig = window.$RefreshSig$;
helpers.prelude(module);

try {
  Object.defineProperty(exports, "__esModule", {
    value: true
  });
  exports.default = void 0;

  var _react = _interopRequireDefault(require("react"));

  var _variables = require("../utils/variables");

  var _users = require("../api/users");

  var _reactRedux = require("react-redux");

  var _jsxFileName = "/home/manu/Documents/coderafiki/study-tool/src/components/signup.tsx",
      _s = $RefreshSig$();

  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

  function Signup({
    state,
    dispatch
  }) {
    _s();

    const [user, setUser] = _react.default.useState({
      login: '',
      password: ''
    });

    const signup = async () => {
      try {
        await _users.api.register({ ...user
        });
        const log = await _users.api.login(user.login, user.password);
        localStorage.setItem(_variables.ptfs0u, log.data.token);
        dispatch({
          type: 'SET_COMPONENT',
          state: {
            component: null
          }
        });
      } catch (e) {
        console.log(e.message);
      }
    };

    const login = () => {
      dispatch({
        type: 'SET_COMPONENT',
        state: {
          component: 'login'
        }
      });
    };

    const change = event => {
      event.preventDefault();
      const name = event.target.name;
      const userr = user;
      userr[name] = event.target.value;
      setUser(userr);
    };

    return /*#__PURE__*/_react.default.createElement("div", {
      id: "login",
      className: "container is-flex is-flex-direction-column is-justify-content-center is-align-content-center",
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 40,
        columnNumber: 9
      }
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "p-4",
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 41,
        columnNumber: 13
      }
    }, "Signup"), /*#__PURE__*/_react.default.createElement("div", {
      className: "field",
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 42,
        columnNumber: 13
      }
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "control m-2",
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 43,
        columnNumber: 17
      }
    }, /*#__PURE__*/_react.default.createElement("input", {
      onChange: change,
      className: "input is-primary",
      type: "email",
      placeholder: "email",
      name: "login",
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 44,
        columnNumber: 21
      }
    }))), /*#__PURE__*/_react.default.createElement("div", {
      className: "field",
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 47,
        columnNumber: 13
      }
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "control m-2",
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 48,
        columnNumber: 17
      }
    }, /*#__PURE__*/_react.default.createElement("input", {
      onChange: change,
      className: "input is-primary",
      type: "password",
      placeholder: "password",
      name: "password",
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 49,
        columnNumber: 21
      }
    }))), /*#__PURE__*/_react.default.createElement("div", {
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 52,
        columnNumber: 13
      }
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "m-4 ",
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 53,
        columnNumber: 17
      }
    }, " ", /*#__PURE__*/_react.default.createElement("a", {
      type: "button",
      className: "button is-rounded",
      onClick: signup,
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 53,
        columnNumber: 40
      }
    }, "register"), " "), /*#__PURE__*/_react.default.createElement("div", {
      className: "m-4",
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 54,
        columnNumber: 17
      }
    }, /*#__PURE__*/_react.default.createElement("a", {
      onClick: login,
      __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 54,
        columnNumber: 38
      }
    }, "login"), " ")));
  }

  _s(Signup, "4l9Hlp4nsJDUoRPlUN+GCN94w5k=");

  _c = Signup;

  var _default = (0, _reactRedux.connect)((state, dispatch) => ({
    state,
    dispatch
  }))(Signup);

  exports.default = _default;

  var _c;

  $RefreshReg$(_c, "Signup");
  helpers.postlude(module);
} finally {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}